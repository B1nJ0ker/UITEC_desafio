
<div id="mainDiv" class="shadow p-3 mb-5 rounded">  
    <h4 class="d-flex justify-content-center text-white">Cadastrar Produtos</h4>
    <br>
    <form [formGroup]="form" id="salvar_form" (ngSubmit)="submit()" class="text-white">
        <div class="form-row">
            <div class="form-group">
                <label for="nome_prod">Nome do Produto</label>
                <input formControlName="nome_prod" type="text" id="nome_prod" class="form-control" name="nome_prod" maxlength="100" required  placeholder="Nome do Produto"/>
                <div *ngIf="form.get('nome_prod')?.invalid && (form.get('nome_prod')?.dirty || form.get('nome_prod')?.touched)"
                    class="alert alert-danger">
                    <div *ngIf="form.get('nome_prod')?.errors?.['required']">Nome é obrigatório.</div>
                    <div *ngIf="form.get('nome_prod')?.errors?.['minlength']"> Nome deve ter no máximo 100 caracteres. </div>
                </div>

            </div>
        </div>
        <div class="form-row d-flex justify-content-around">
            <div class="form-group col-md-2">
                <label for="valor_prod">Preço</label>
                <input formControlName="valor_prod" type="number" required class="form-control" id="valor_prod" name="valor_prod" step="0.01" />
                <div *ngIf="form.get('valor_prod')?.invalid && (form.get('valor_prod')?.dirty || form.get('valor_prod')?.touched)"
                    class="alert alert-danger">
                    <div *ngIf="form.get('valor_prod')?.errors?.['required']">Preço é obrigatório.</div>
                    <div *ngIf="form.get('valor_prod')?.errors?.['pattern']">Preço deve ser um número decimal com 2 casas decimais.</div>
                </div>
            </div>
            <div class="form-group col-md-4">
                <label for="categoria_prod">Categoria</label>
                <select formControlName="categoria_prod" required id="categoria_prod" name="categoria_prod" class="form-control">
                    <option *ngFor="let categoria of categorias$ | async" [value]="categoria.id">{{ categoria.nome_cat }}</option>
                </select>
                <div *ngIf="form.get('categoria_prod')?.invalid && (form.get('categoria_prod')?.dirty || form.get('categoria_prod')?.touched)"
                    class="alert alert-danger">
                    <div *ngIf="form.get('categoria_prod')?.errors?.['required']">Categoria é obrigatória.</div>
                </div>
            </div>
            <div class="form-group col-md-2">
                <label>Quantidade</label>
                <input formControlName="quantidade_prod" required type="text" class="form-control" id="quantidade_prod" name="quantidade_prod">
                <div *ngIf="form.get('quantidade_prod')?.invalid && (form.get('quantidade_prod')?.dirty || form.get('quantidade_prod')?.touched)"
                    class="alert alert-danger">
                    <div *ngIf="form.get('quantidade_prod')?.errors?.['required']">Quantidade é obrigatória.</div>
                    <div *ngIf="form.get('quantidade_prod')?.errors?.['pattern']">Quantidade deve ser um número inteiro.</div>
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="vencimento">Vencimento</label>
                <input formControlName="vencimento_prod" type="date" class="form-control" id="vencimento_prod" name="vencimento_prod">
                <div *ngIf="form.get('perecivel_prod')?.value && form.get('vencimento_prod')?.invalid && (form.get('vencimento_prod')?.dirty || form.get('vencimento_prod')?.touched)"
                    class="alert alert-danger">
                    <div *ngIf="form.get('vencimento_prod')?.errors?.['required']">Vencimento é obrigatório.</div>
                </div>
            </div>
            <div class="form-group col-md-1" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <label  for="perecivel_prod">Perecível</label>
                <input formControlName="perecivel_prod" style="height: 25px; width: 25px" class="form-check-input" value="1" type="checkbox" name="perecivel_prod" id="perecivel_prod">
            </div>
        </div>
        
      </form>
      <br>
      <div class="pagination justify-content-center">
         <button class="btn btn-info d-flex justify-content-around" form="salvar_form" [disabled]="!form.valid">Salvar</button>
      </div>
</div>